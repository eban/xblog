---
title: データ量
date: 2021-10-31 18:55:49 +0900
layout: blog
---

パイプに渡すデータ量が処理時間に相当影響することが判明。
```console
2021-10-31 (Sun) 17:32:17:
[0] vps:~/git % time seq inf | mawk '$1>a=(24153319581254312065344-$1^3)^(1/3){exit}{printf "%.f\n", a}' | awk -M 'NR^3+$1^3==24153319581254312065344{print NR,$1}'
582162 28906206
3064173 28894803
8519281 28657487
16218068 27093208
17492496 26590452
18289922 26224366
seq inf  0.26s user 0.15s system 1% cpu 21.465 total
mawk '$1>a=(24153319581254312065344-$1^3)^(1/3){exit}{printf "%.f\n", a}'  21.08s user 0.28s system 99% cpu 21.465 total
awk -M 'NR^3+$1^3==24153319581254312065344{print NR,$1}'  13.62s user 0.28s system 64% cpu 21.464 total
[0] vps:~/git % time yes "" | mawk 'NR>a=(24153319581254312065344-NR^3)^(1/3){exit}{printf "%.f\n", a}' | gawk -M 'NR^3+$1^3==24153319581254312065344{print NR,$1}'
582162 28906206
3064173 28894803
8519281 28657487
16218068 27093208
17492496 26590452
18289922 26224366
yes ""  0.01s user 0.03s system 0% cpu 16.393 total
mawk 'NR>a=(24153319581254312065344-NR^3)^(1/3){exit}{printf "%.f\n", a}'  16.18s user 0.20s system 99% cpu 16.393 total
gawk -M 'NR^3+$1^3==24153319581254312065344{print NR,$1}'  13.68s user 0.16s system 84% cpu 16.393 total
```
